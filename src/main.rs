mod vm;
mod stack;
mod program;
mod instruction;


use vm::VirtualMachine;

fn main() {
    let mut vm = VirtualMachine::new(vec![
        // const  255
        // const  6969
        // add
        // const  1
        // mul
        // print
        // store  ~1
        // load   ~1
        // gstore ~1
        // gload  ~1
        // print
        // 0x10, 0x00, 0x00, 0x00, 0xFF,
        // 0x10, 0x00, 0x00, 0x0F, 0xFF,
        // 0x40,
        // 0x10, 0x00, 0x00, 0x00, 0x03,
        // 0x42,
        // 0xE0,
        // 0x14, 0x00, 0x00, 0x00, 0x01,
        // 0x11, 0x00, 0x00, 0x00, 0x01,
        // 0xE0,
        // 0x15, 0x00, 0x00, 0x00, 0x01,
        // 0xE0,
        // 0x12, 0x00, 0x00, 0x00, 0x01,

        // const 11
        // const 0
        // const 1
        // add
        // print
        // reljmpgt -8
        0x10, 0x00, 0x00, 0x00, 0x0B,
        0x10, 0, 0, 0, 0,
        0x10, 0, 0, 0, 1,
        0x40,
        0xE0,
        0x84, 0xFF, 0xFF, 0xFF, 0xEF,
        0x00
    ]);
    vm.run();
}

